% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/projoint_level.R
\name{projoint_level}
\alias{projoint_level}
\title{Estimate Profile- or Choice-Level Effects}
\usage{
projoint_level(
  .data,
  .qoi,
  .structure,
  .estimand,
  .se_method,
  .irr,
  .remove_ties,
  .ignore_position,
  .n_sims,
  .n_boot,
  .weights_1,
  .clusters_1,
  .se_type_1,
  .weights_2,
  .clusters_2,
  .se_type_2,
  .auto_cluster = TRUE,
  .seed = NULL
)
}
\arguments{
\item{.data}{A \code{\link{projoint_data}} object.}

\item{.qoi}{Optional \code{\link{projoint_qoi}}; if \code{NULL}, produces all MMs/AMCEs.}

\item{.structure}{Either \code{"profile_level"} or \code{"choice_level"}.}

\item{.estimand}{Either \code{"mm"} (marginal mean) or \code{"amce"} (average marginal component effect).}

\item{.se_method}{One of \code{"analytical"}, \code{"simulation"}, or \code{"bootstrap"}.}

\item{.irr}{\code{NULL} to estimate IRR from repeated tasks, or numeric to fix IRR.}

\item{.remove_ties}{Logical; remove ties in choice data before estimation? Default \code{TRUE}.}

\item{.ignore_position}{Logical; for choice-level only. Ignore profile position (left/right)? Default \code{TRUE}.}

\item{.n_sims}{Integer; required when \code{.se_method = "simulation"}.}

\item{.n_boot}{Integer; required when \code{.se_method = "bootstrap"}.}

\item{.weights_1, .clusters_1, .se_type_1}{Passed to \code{\link[estimatr]{lm_robust}} for IRR estimation.
If \code{.se_type_1} is \code{NULL}, \emph{estimatr} defaults are used (HC2 when unclustered; CR2 when clustered).
See \code{\link{projoint}} for valid \code{se_type_*} values.}

\item{.weights_2, .clusters_2, .se_type_2}{Passed to \code{\link[estimatr]{lm_robust}} for MM/AMCE estimation.
If \code{.se_type_2} is \code{NULL}, \emph{estimatr} defaults are used (HC2 when unclustered; CR2 when clustered).
See \code{\link{projoint}} for valid \code{se_type_*} values.}

\item{.auto_cluster}{Logical. If \code{TRUE} (default), automatically cluster on an \code{id}
column when present and no \code{.clusters_*} are supplied. Auto-clustering only
occurs when the corresponding \code{.se_type_*} is \code{NULL}. See \code{\link{projoint}}.}

\item{.seed}{Optional integer. If supplied, sets a temporary RNG seed for reproducible simulation/bootstrap inside this call 
and restores the previous RNG state on exit.}
}
\value{
A \code{\link{projoint_results}} object (typically returned via \code{\link{projoint}}).
}
\description{
Internal function called by \code{\link{projoint}} to compute marginal means (MMs) or
average marginal component effects (AMCEs) at the chosen structure.
}
\keyword{internal}
