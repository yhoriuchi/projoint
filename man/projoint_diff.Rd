% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/projoint_diff.R
\name{projoint_diff}
\alias{projoint_diff}
\title{Estimate Differences Across Subgroups}
\usage{
projoint_diff(
  .data,
  .qoi,
  .by_var,
  .structure,
  .estimand,
  .se_method,
  .irr,
  .remove_ties,
  .ignore_position,
  .n_sims,
  .n_boot,
  .weights_1,
  .clusters_1,
  .se_type_1,
  .weights_2,
  .clusters_2,
  .se_type_2,
  .auto_cluster = TRUE
)
}
\arguments{
\item{.data}{A \code{\link{projoint_data}} object.}

\item{.qoi}{Optional \code{\link{projoint_qoi}}; if \code{NULL}, produces all MMs/AMCEs.}

\item{.by_var}{Subgrouping variable in \code{.data$data}; must be logical (TRUE/FALSE),
numeric/integer coded as 0/1, or factor with levels \code{"0"}/\code{"1"}.}

\item{.structure}{Must be \code{"profile_level"} for subgroup analysis.}

\item{.estimand}{Either \code{"mm"} or \code{"amce"}.}

\item{.se_method}{One of \code{"analytical"}, \code{"simulation"}, or \code{"bootstrap"}.}

\item{.irr}{\code{NULL} to estimate IRR from repeated tasks, or numeric to fix IRR.}

\item{.remove_ties}{Logical; remove ties in choice data before estimation? Default \code{TRUE}.}

\item{.ignore_position}{Ignored (subgroup analysis is profile-level only).}

\item{.n_sims}{Integer; required when \code{.se_method = "simulation"}.}

\item{.n_boot}{Integer; required when \code{.se_method = "bootstrap"}.}

\item{.weights_1, .clusters_1, .se_type_1}{Passed to \code{\link[estimatr]{lm_robust}} for IRR estimation.
If \code{.se_type_1} is \code{NULL}, \emph{estimatr} defaults are used (HC2 when unclustered; CR2 when clustered).
See \code{\link{projoint}} for valid \code{se_type_*} values.}

\item{.weights_2, .clusters_2, .se_type_2}{Passed to \code{\link[estimatr]{lm_robust}} for MM/AMCE estimation.
If \code{.se_type_2} is \code{NULL}, \emph{estimatr} defaults are used (HC2 when unclustered; CR2 when clustered).
See \code{\link{projoint}} for valid \code{se_type_*} values.}

\item{.auto_cluster}{Logical. If \code{TRUE} (default), automatically cluster on an \code{id}
column when present and no \code{.clusters_*} are supplied. Auto-clustering only
occurs when the corresponding \code{.se_type_*} is \code{NULL}. See \code{\link{projoint}}.}
}
\value{
A \code{\link{projoint_results}} object with subgroup differences.
}
\description{
Internal function called by \code{\link{projoint}} to compute subgroup differences
(group \code{== 1} minus group \code{== 0}) in marginal means (MMs) or average marginal component effects (AMCEs).
Only supported for \code{.structure = "profile_level"}.
}
\keyword{internal}
