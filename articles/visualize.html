<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>5. Visualize MMs or AMCEs • projoint</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="5. Visualize MMs or AMCEs">
<meta name="description" content="How to visualze the marginal means (MMs) or average marginal component effects (AMCEs)
">
<meta property="og:description" content="How to visualze the marginal means (MMs) or average marginal component effects (AMCEs)
">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">projoint</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.4.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/projoint.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>5. Visualize MMs or AMCEs</h1>
            
      

      <div class="d-none name"><code>visualize.Rmd</code></div>
    </div>

    
    
<p>The <code>projoint</code> package features a set of tools for
producing publication-ready figures from conjoint analyses.</p>
<div class="section level3">
<h3 id="load-the-projoint-package-and-the-other-necessary-package">5.1 Load the projoint package and the other necessary package<a class="anchor" aria-label="anchor" href="#load-the-projoint-package-and-the-other-necessary-package"></a>
</h3>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yhoriuchi.github.io/projoint/">projoint</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="profile-level-analysis">5.2 Profile-level analysis<a class="anchor" aria-label="anchor" href="#profile-level-analysis"></a>
</h3>
<div class="section level4">
<h4 id="estimate-mms-and-amces-">Estimate MMs and AMCEs.<a class="anchor" aria-label="anchor" href="#estimate-mms-and-amces-"></a>
</h4>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mm</span>   <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projoint.html">projoint</a></span><span class="op">(</span><span class="va">out1_arranged</span><span class="op">)</span> </span>
<span><span class="va">amce</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projoint.html">projoint</a></span><span class="op">(</span><span class="va">out1_arranged</span>, .estimand <span class="op">=</span> <span class="st">"amce"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="visualize-mms-and-amces">Visualize MMs and AMCEs<a class="anchor" aria-label="anchor" href="#visualize-mms-and-amces"></a>
</h4>
<p>By default, most researchers should prefer to view the corrected
estimates of either MMs or AMCEs. Researchers can, however, choose to
instead visualize the uncorrected estimates, or to view both
together.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mm</span><span class="op">)</span></span></code></pre></div>
<p><img src="visualize_files/figure-html/unnamed-chunk-3-1.png" width="768"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mm</span>, .estimates <span class="op">=</span> <span class="st">"uncorrected"</span><span class="op">)</span></span></code></pre></div>
<p><img src="visualize_files/figure-html/unnamed-chunk-3-2.png" width="768"></p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mm</span>, .estimates <span class="op">=</span> <span class="st">"both"</span><span class="op">)</span></span></code></pre></div>
<p><img src="visualize_files/figure-html/unnamed-chunk-3-3.png" width="768"></p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">amce</span><span class="op">)</span></span></code></pre></div>
<p><img src="visualize_files/figure-html/unnamed-chunk-4-1.png" width="768"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">amce</span>, .estimates <span class="op">=</span> <span class="st">"uncorrected"</span><span class="op">)</span></span></code></pre></div>
<p><img src="visualize_files/figure-html/unnamed-chunk-4-2.png" width="768"></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">amce</span>, .estimates <span class="op">=</span> <span class="st">"both"</span><span class="op">)</span></span></code></pre></div>
<p><img src="visualize_files/figure-html/unnamed-chunk-4-3.png" width="768"></p>
</div>
</div>
<div class="section level3">
<h3 id="choice-level-analysis">5.3 Choice-level analysis<a class="anchor" aria-label="anchor" href="#choice-level-analysis"></a>
</h3>
<p>To undertake choice-level analysis, you first need to specify your
quantity of interest using <code><a href="../reference/set_qoi.html">set_qoi()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">qoi_mm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/set_qoi.html">set_qoi</a></span><span class="op">(</span>.structure <span class="op">=</span> <span class="st">"choice_level"</span>, </span>
<span>                  .att_choose <span class="op">=</span> <span class="st">"att1"</span>, </span>
<span>                  .lev_choose <span class="op">=</span> <span class="st">"level1"</span>, </span>
<span>                  .att_notchoose <span class="op">=</span> <span class="st">"att1"</span>, </span>
<span>                  .lev_notchoose <span class="op">=</span> <span class="st">"level3"</span><span class="op">)</span></span></code></pre></div>
<p>You can then estimate the choice-level marginal means:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">choice_mm</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/projoint.html">projoint</a></span><span class="op">(</span>.data <span class="op">=</span> <span class="va">out1_arranged</span>, </span>
<span>                      .structure <span class="op">=</span> <span class="st">"choice_level"</span>, </span>
<span>                      .qoi <span class="op">=</span> <span class="va">qoi_mm</span>, </span>
<span>                      .ignore_position <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">choice_mm</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [A projoint output]</span></span>
<span><span class="co">##  Estimand: mm </span></span>
<span><span class="co">##  Structure: choice_level </span></span>
<span><span class="co">##  IRR: Estimated </span></span>
<span><span class="co">##  Tau: 0.1721281 </span></span>
<span><span class="co">##  Remove ties: TRUE </span></span>
<span><span class="co">##  SE methods: analytical</span></span></code></pre>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">choice_mm</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 2 × 7</span></span></span>
<span><span class="co">##   estimand       estimate     se conf.low conf.high att_level_choose</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> mm_uncorrected    0.581 0.018<span style="text-decoration: underline;">7</span>    0.544     0.618 att1:level1     </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> mm_corrected      0.624 0.028<span style="text-decoration: underline;">8</span>    0.567     0.680 att1:level1     </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 1 more variable: att_level_notchoose &lt;chr&gt;</span></span></span></code></pre>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">choice_mm</span><span class="op">)</span></span></code></pre></div>
<p><img src="visualize_files/figure-html/unnamed-chunk-6-1.png" width="768"></p>
<p>Since there are not many estimates, we encourage your to make plots
based on the objectives of your research. The default plot for the
choice-level marginal means is a basic ggplot object, which compares the
marginal mean for each of the two options. The sum of the two
percentages is 100, and thus you may think that redundant information is
presented in this figure. But we think this figure is an effective way
to show the results of a head-to-head (choice-level) comparison.</p>
<p>You can polish by adding some layers :</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">choice_mm</span>,</span>
<span>     .labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"15% of pre-tax income"</span>, </span>
<span>                 <span class="st">"30% of pre-tax income"</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Marginal mean"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Housing Cost"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_cartesian.html" class="external-link">coord_cartesian</a></span><span class="op">(</span>ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0.5</span>, </span>
<span>             linetype <span class="op">=</span> <span class="st">"dashed"</span>, </span>
<span>             color <span class="op">=</span> <span class="st">"darkgray"</span><span class="op">)</span></span></code></pre></div>
<p><img src="visualize_files/figure-html/unnamed-chunk-7-1.png" width="768"></p>
<p><span style="color:red">Note: The current version of the
<code>projoint</code> package does not have a function to plot
choice-level average marginal component effects. Stay tuned!</span></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Yusaku Horiuchi, Aaron Kaufman.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
