<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Reshapes survey response data for conjoint analysis — reshape_projoint • projoint</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Reshapes survey response data for conjoint analysis — reshape_projoint"><meta name="description" content="This function takes a data frame, preferably from read_Qualtrics, and reshapes it from wide to long such that each row is a distinct conjoint task rather than a respondent."><meta property="og:description" content="This function takes a data frame, preferably from read_Qualtrics, and reshapes it from wide to long such that each row is a distinct conjoint task rather than a respondent."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">projoint</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/faq.html">FAQ</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Reshapes survey response data for conjoint analysis</h1>

      <div class="d-none name"><code>reshape_projoint.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function takes a data frame, preferably from <code><a href="read_Qualtrics.html">read_Qualtrics</a></code>, and reshapes it from wide to long such that each row is a distinct conjoint task rather than a respondent.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">reshape_projoint</span><span class="op">(</span></span>
<span>  <span class="va">.dataframe</span>,</span>
<span>  <span class="va">.outcomes</span>,</span>
<span>  .choice_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span><span class="op">)</span>,</span>
<span>  .alphabet <span class="op">=</span> <span class="st">"K"</span>,</span>
<span>  .idvar <span class="op">=</span> <span class="st">"ResponseId"</span>,</span>
<span>  .repeated <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  .flipped <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  .covariates <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .fill <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--dataframe">.dataframe<a class="anchor" aria-label="anchor" href="#arg--dataframe"></a></dt>
<dd><p>A data frame, preferably from <code><a href="read_Qualtrics.html">read_Qualtrics</a></code></p></dd>


<dt id="arg--outcomes">.outcomes<a class="anchor" aria-label="anchor" href="#arg--outcomes"></a></dt>
<dd><p>A character vector identifying the column names that contain outcomes. If there is a repeated task, it should be the LAST element in this vector.</p></dd>


<dt id="arg--choice-labels">.choice_labels<a class="anchor" aria-label="anchor" href="#arg--choice-labels"></a></dt>
<dd><p>c("A", "B") (default): a vector identifying the possibilities for the outcome variables – e.g., c("Candidate A", "Candidate B")</p></dd>


<dt id="arg--alphabet">.alphabet<a class="anchor" aria-label="anchor" href="#arg--alphabet"></a></dt>
<dd><p>"K" (default): a letter indicating conjoint attributes. If using Strezhnev's package (<a href="https://github.com/astrezhnev/conjointsdt" class="external-link">https://github.com/astrezhnev/conjointsdt</a>) in Qualtrics.</p></dd>


<dt id="arg--idvar">.idvar<a class="anchor" aria-label="anchor" href="#arg--idvar"></a></dt>
<dd><p>"ResponseId" (default): a character identifying the column name containing respondent</p></dd>


<dt id="arg--repeated">.repeated<a class="anchor" aria-label="anchor" href="#arg--repeated"></a></dt>
<dd><p>TRUE (default) if there is a repeated task (recommended). The repeated task should be the same as the first task.</p></dd>


<dt id="arg--flipped">.flipped<a class="anchor" aria-label="anchor" href="#arg--flipped"></a></dt>
<dd><p>TRUE (default) if the profiles of the repeated task are flipped (recommended)</p></dd>


<dt id="arg--covariates">.covariates<a class="anchor" aria-label="anchor" href="#arg--covariates"></a></dt>
<dd><p>NULL (default): a character vector identifying respondents' covariates used for subgroup analysis</p></dd>


<dt id="arg--fill">.fill<a class="anchor" aria-label="anchor" href="#arg--fill"></a></dt>
<dd><p>FALSE (default): A logical vector: TRUE if you want to use information about whether a respondent chose the same profile for the repeated task and "fill" (using the `tidyr` package) missing values for the non-repeated tasks, FALSE (otherwise). If the number of respondents is small, if the number of specific profile pairs of your interest is small, and/or if the number of specific respondent subgroups you want to study is small, it is worth changing this option to TRUE. But please note that `.fill = TRUE` is based on an assumption that IRR is independent of information contained in conjoint tables. Although our empirical tests suggest the validity of this assumption, if you are unsure about it, it is better to use the default value (FALSE).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A projoint object of class `projoint_data` ready to pass to `projoint()`.</p>
<p>A projoint object of class <code><a href="projoint_data.html">projoint_data</a></code> ready to pass to <code><a href="projoint.html">projoint</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://yhoriuchi.github.io/projoint/">projoint</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"exampleData1"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">exampleData1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 6 × 185</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ResponseId      choice1_repeated_fli…¹ choice1 choice2 choice3 choice4 choice5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> R_1M3TDihZzq9z… Community B            Commun… Commun… Commun… Commun… Commun…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> R_3HtXzkcSSlfi… Community B            Commun… Commun… Commun… Commun… Commun…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> R_yjYj0jtOY98X… Community B            Commun… Commun… Commun… Commun… Commun…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">4</span> R_1dKd05O6FTOV… Community B            Commun… Commun… Commun… Commun… Commun…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">5</span> R_1otDp642wWYl… Community A            Commun… Commun… Commun… Commun… Commun…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">6</span> R_2BnD3fuJMRKZ… Community A            Commun… Commun… Commun… Commun… Commun…</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ abbreviated name: ¹​choice1_repeated_flipped</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 178 more variables: choice6 &lt;chr&gt;, choice7 &lt;chr&gt;, choice8 &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   race &lt;chr&gt;, party_1 &lt;chr&gt;, party_2 &lt;chr&gt;, party_3 &lt;chr&gt;, party_4 &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   ideology &lt;chr&gt;, honesty &lt;chr&gt;, `K-1-1` &lt;chr&gt;, `K-1-1-1` &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   `K-1-2` &lt;chr&gt;, `K-1-1-2` &lt;chr&gt;, `K-1-3` &lt;chr&gt;, `K-1-1-3` &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   `K-1-4` &lt;chr&gt;, `K-1-1-4` &lt;chr&gt;, `K-1-5` &lt;chr&gt;, `K-1-1-5` &lt;chr&gt;,</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;">#   `K-1-6` &lt;chr&gt;, `K-1-1-6` &lt;chr&gt;, `K-1-7` &lt;chr&gt;, `K-1-1-7` &lt;chr&gt;, …</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Write outcome column names</span></span></span>
<span class="r-in"><span><span class="va">outcomes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"choice"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">1</span>, to <span class="op">=</span> <span class="fl">8</span>, by <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">outcomes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">outcomes</span>, <span class="st">"choice1_repeated_flipped"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Reshape the data</span></span></span>
<span class="r-in"><span><span class="va">reshaped_data</span> <span class="op">&lt;-</span> <span class="fu">reshape_projoint</span><span class="op">(</span></span></span>
<span class="r-in"><span>  .dataframe <span class="op">=</span> <span class="va">exampleData1</span>, </span></span>
<span class="r-in"><span>  .outcomes <span class="op">=</span> <span class="va">outcomes</span><span class="op">)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Yusaku Horiuchi, Aaron Kaufman, Gary King.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

